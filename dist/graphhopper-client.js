(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
GHInput=function(t,n){this.set(t,n)},GHInput.prototype.round=function(t,n){return void 0===n&&(n=1e6),Math.round(t*n)/n},GHInput.prototype.setCoord=function(t,n){this.lat=this.round(t),this.lng=this.round(n),this.input=this.toString()},GHInput.isObject=function(t){var n=Object.prototype.toString.call(t);return"[object object]"===n.toLowerCase()},GHInput.isString=function(t){var n=Object.prototype.toString.call(t);return"[object string]"===n.toLowerCase()},GHInput.prototype.set=function(t,n){if(n)return void this.setCoord(t,n);if(this.input=t,GHInput.isObject(t))this.setCoord(t.lat,t.lng);else if(GHInput.isString(t)){var o=t.indexOf(",");o>=0&&(this.lat=this.round(parseFloat(t.substr(0,o))),this.lng=this.round(parseFloat(t.substr(o+1))))}},GHInput.prototype.toString=function(){if(void 0!==this.lat&&void 0!==this.lng)return this.lat+","+this.lng},module.exports=GHInput;
},{}],2:[function(_dereq_,module,exports){
var GHUtil=function(){};GHUtil.prototype.clone=function(r){var e={};for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o]);return e},GHUtil.prototype.copyProperties=function(r,e){if(!r)return e;for(var o in r)r.hasOwnProperty(o)&&void 0!==r[o]&&(e[o]=r[o]);return e},GHUtil.prototype.decodePath=function(r,e){for(var o=r.length,t=0,i=[],n=0,a=0,p=0;t<o;){var h,l=0,u=0;do h=r.charCodeAt(t++)-63,u|=(31&h)<<l,l+=5;while(h>=32);var c=1&u?~(u>>1):u>>1;n+=c,l=0,u=0;do h=r.charCodeAt(t++)-63,u|=(31&h)<<l,l+=5;while(h>=32);var d=1&u?~(u>>1):u>>1;if(a+=d,e){l=0,u=0;do h=r.charCodeAt(t++)-63,u|=(31&h)<<l,l+=5;while(h>=32);var v=1&u?~(u>>1):u>>1;p+=v,i.push([1e-5*a,1e-5*n,p/100])}else i.push([1e-5*a,1e-5*n])}return i},module.exports=GHUtil;

},{}],3:[function(_dereq_,module,exports){
var GHUtil=_dereq_("./GHUtil"),ghUtil=new GHUtil;GraphHopperGeocoding=function(e){this.location_bias,this.query,this.host="https://graphhopper.com/api/1",this.debug=!1,this.locale="en",this.basePath="/geocode",ghUtil.copyProperties(e,this)},GraphHopperGeocoding.prototype.clearLocation=function(){this.location_bias=void 0},GraphHopperGeocoding.prototype.getParametersAsQueryString=function(e){var o="locale="+e.locale;return e.query?(o+="&q="+encodeURIComponent(e.query),e.location_bias?o+="&point="+encodeURIComponent(e.location_bias.toString()):e.point&&(o+="&point="+encodeURIComponent(e.point.toString()))):(o+="&reverse=true",e.point&&(o+="&point="+encodeURIComponent(e.point.toString()))),e.debug&&(o+="&debug=true"),e.limit&&(o+="&limit="+e.limit),o},GraphHopperGeocoding.prototype.doRequest=function(e,o){var t=this,i=ghUtil.clone(t);o&&(i=ghUtil.copyProperties(o,i));var r=i.host+i.basePath+"?"+this.getParametersAsQueryString(i)+"&key="+i.key;$.ajax({timeout:5e3,url:r,type:"GET",dataType:i.data_type}).done(function(o){e(o)}).fail(function(o){var t="Unknown error";o.responseJSON&&o.responseJSON.message&&(t=o.responseJSON.message);var i="Error for "+r,n={message:t,details:i};e(n)})},module.exports=GraphHopperGeocoding;

},{"./GHUtil":2}],4:[function(_dereq_,module,exports){
var GHUtil=_dereq_("./GHUtil"),ghUtil=new GHUtil;GraphHopperIsochrone=function(e){this.time_limit=600,this.buckets=3,this.vehicle="car",this.point,this.host="https://graphhopper.com/api/1",this.debug=!1,this.basePath="/isochrone",ghUtil.copyProperties(e,this)},GraphHopperIsochrone.prototype.getParametersAsQueryString=function(e){var t="point="+e.point;return t+="&time_limit="+e.time_limit,t+="&buckets="+e.buckets,t+="&vehicle="+e.vehicle,e.debug&&(t+="&debug=true"),t},GraphHopperIsochrone.prototype.doRequest=function(e,t){var r=this,i=ghUtil.clone(r);t&&(i=ghUtil.copyProperties(t,i));var o=i.host+i.basePath+"?"+this.getParametersAsQueryString(i)+"&key="+i.key;$.ajax({timeout:5e3,url:o,type:"GET",dataType:i.data_type}).done(function(t){e(t)}).fail(function(t){var r="Unknown error";t.responseJSON&&t.responseJSON.message&&(r=t.responseJSON.message);var i="Error for "+o,s={message:r,details:i};e(s)})},module.exports=GraphHopperIsochrone;

},{"./GHUtil":2}],5:[function(_dereq_,module,exports){
var GHUtil=_dereq_("./GHUtil"),ghUtil=new GHUtil;GraphHopperMapMatching=function(e){this.host="https://graphhopper.com/api/1",this.vehicle="car",this.gps_accuracy=20,this.max_visited_nodes=3e3,this.debug=!1,this.data_type="json",this.locale="en",this.points_encoded=!0,this.instructions=!0,this.elevation=!0,this.basePath="/match",ghUtil.copyProperties(e,this)},GraphHopperMapMatching.prototype.getParametersAsQueryString=function(e){var t="locale="+e.locale;return e.debug&&(t+="&debug=true"),t+="&gps_accuracy="+e.gps_accuracy,t+="&max_visited_nodes="+e.max_visited_nodes,t+="&type="+e.data_type,e.instructions&&(t+="&instructions="+e.instructions),e.points_encoded&&(t+="&points_encoded="+e.points_encoded),e.elevation&&(t+="&elevation="+e.elevation),e.vehicle&&(t+="&vehicle="+e.vehicle),t},GraphHopperMapMatching.prototype.doRequest=function(e,t,i){var o=this,a=ghUtil.clone(o);i&&(a=ghUtil.copyProperties(i,a));var s=a.host+a.basePath+"?"+o.getParametersAsQueryString(a);a.key&&(s+="&key="+a.key),$.ajax({timeout:2e4,url:s,contentType:"application/xml",type:"POST",crossDomain:!0,data:e}).done(function(e){if(e.paths)for(var i=0;i<e.paths.length;i++){var a=e.paths[i];if(a.points_encoded){var s=ghUtil.decodePath(a.points,o.elevation);a.points={type:"LineString",coordinates:s},delete a.snapped_waypoints}}t(e)}).fail(function(e){t(e.responseJSON&&e.responseJSON.message?e.responseJSON:{message:"Unknown error",details:"Error for "+s})})},module.exports=GraphHopperMapMatching;

},{"./GHUtil":2}],6:[function(_dereq_,module,exports){
var GHUtil=_dereq_("./GHUtil"),ghUtil=new GHUtil;GraphHopperMatrix=function(t){this.host="https://graphhopper.com/api/1",vehicle="car",debug=!1,data_type="json",this.from_points=[],this.to_points=[],this.out_arrays=[],this.basePath="/matrix",this.graphhopper_maps_host="https://graphhopper.com/maps/?",ghUtil.copyProperties(t,this)},GraphHopperMatrix.prototype.addPoint=function(t){this.addFromPoint(t),this.addToPoint(t)},GraphHopperMatrix.prototype.addFromPoint=function(t){this.from_points.push(t)},GraphHopperMatrix.prototype.addToPoint=function(t){this.to_points.push(t)},GraphHopperMatrix.prototype.clearPoints=function(){this.from_points.length=0,this.to_points.length=0},GraphHopperMatrix.prototype.addOutArray=function(t){this.out_arrays.push(t)},GraphHopperMatrix.prototype.doRequest=function(t,o){var r=this,p=ghUtil.clone(r);o&&(p=ghUtil.copyProperties(o,p));var i=p.host+p.basePath+"?vehicle="+p.vehicle+"&key="+p.key;for(var e in p.from_points){var a=p.from_points[e];i+="&from_point="+encodeURIComponent(a.toString())}for(var e in p.to_points){var a=p.to_points[e];i+="&to_point="+encodeURIComponent(a.toString())}if(p.out_arrays)for(var e in p.out_arrays){var n=p.out_arrays[e];i+="&out_array="+n}p.debug&&(i+="&debug=true"),$.ajax({timeout:3e4,url:i,type:"GET",dataType:p.data_type}).done(function(o){t(o)}).fail(function(o){t(o.responseJSON&&o.responseJSON.message?o.responseJSON:{message:"Unknown error",details:"Error for "+i})})},GraphHopperMatrix.prototype.toHtmlTable=function(t){var o="<table border='1' cellpadding='10'>";o+="<tr>",o+="<td>&#8595; from &#92; to &#8594;</td>";for(var r in this.to_points)o+="<td><b>"+this.to_points[r]+"</b></td>";o+="</tr>";for(var p in t){o+="<tr>",o+="<td><b>"+this.from_points[p]+"</b></td>";var i=t[p];for(var r in i){var e=this.graphhopper_maps_host+"point="+encodeURIComponent(this.from_points[p])+"&point="+encodeURIComponent(this.to_points[r])+"&vehicle="+this.vehicle;o+="<td> <a href='"+e+"'>"+i[r]+"</a> </td>"}o+="</tr>\n"}return o+="</table>"},module.exports=GraphHopperMatrix;

},{"./GHUtil":2}],7:[function(_dereq_,module,exports){
var GHUtil=_dereq_("./GHUtil"),ghUtil=new GHUtil;GraphHopperOptimization=function(e){this.points=[],this.host="https://graphhopper.com/api/1",this.key=e.key,this.profile=e.profile,this.basePath="/vrp",this.waitInMillis=1e3,this.postTimeout=8e3,ghUtil.copyProperties(e,this)},GraphHopperOptimization.prototype.addPoint=function(e){this.points.push(e)},GraphHopperOptimization.prototype.clear=function(){this.points.length=0},GraphHopperOptimization.prototype.doTSPRequest=function(e){this.doVRPRequest(e,1)},GraphHopperOptimization.prototype.doVRPRequest=function(e,i){var t=this,s=t.points[0],o=[];for(var r in t.points)if(!(r<1)){var a=t.points[r],n={id:"_"+r,type:"pickup",name:"maintenance "+r,address:{location_id:"_location_"+r,lon:a.lng,lat:a.lat}};o.push(n)}for(var p=[],l=0;l<i;l++)p.push({vehicle_id:"_vehicle_"+l,start_address:{location_id:"_start_location",lon:s.lng,lat:s.lat},type_id:"_vtype_1"});var d={algorithm:{problem_type:"min-max"},vehicles:p,vehicle_types:[{type_id:"_vtype_1",profile:this.profile}],services:o};console.log(d),t.doRequest(d,e)},GraphHopperOptimization.prototype.doRawRequest=function(e,i,t){var s=this,o=ghUtil.clone(s);t&&(o=ghUtil.copyProperties(t,o));var r=o.host+o.basePath+"/optimize?key="+o.key;$.ajax({timeout:o.postTimeout,url:r,type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),dataType:"json"}).done(function(e){var t,r=o.host+o.basePath+"/solution/"+e.job_id+"?key="+o.key,a=function(){$.ajax({timeout:5e3,url:r,type:"GET",dataType:"json",crossDomain:!0}).done(function(e){return void 0===e?(clearInterval(t),void i({message:"unknown error in calculation for server on "+s.host})):(console.log(e),void("finished"===e.status?(console.log("finished"),clearInterval(t),i(e)):e.message&&(clearInterval(t),i(e))))}).error(function(e){clearInterval(t),e&&e.responseJSON&&(e=e.responseJSON),console.log(e),i(e)})};s.waitInMillis>0?t=setInterval(a,s.waitInMillis):a()}).error(function(e){var t={message:"unknown error - server on "+s.host+" does not respond"};e.responseJSON&&(t=e.responseJSON),i(t)})},GraphHopperOptimization.prototype.doRequest=function(e,i,t){var s={},o={},r={},a={},n={},p={};if(e.vehicle_types)for(var l=0;l<e.vehicle_types.length;l++){var d=e.vehicle_types[l];s[d.type_id]=d.profile,o[d.type_id]=d}if(e.services)for(var h=0;h<e.services.length;h++){var v=e.services[h];p[v.address.location_id]=v.address,a[v.id]=v}if(e.shipments)for(var c=0;c<e.shipments.length;c++){var u=e.shipments[c];p[u.pickup.address.location_id]=u.pickup.address,p[u.delivery.address.location_id]=u.delivery.address,n[u.id]=u}var _={},f={};if(e.vehicles)for(var y=0;y<e.vehicles.length;y++){var g=e.vehicles[y];f[g.vehicle_id]=g;var m=null;if(null!==g.type_id?(m=s[g.type_id],null!==m?r[g.vehicle_id]=m:r[g.vehicle_id]="car"):r[g.vehicle_id]="car",g.start_address&&(p[g.start_address.location_id]=g.start_address),g.end_address&&(p[g.end_address.location_id]=g.end_address),g.break){var O=g.vehicle_id+"_break";_[O]=g.break}}var k=function(e){if(e.solution){var t=e.solution;e.raw_solution=JSON.parse(JSON.stringify(t));for(var s=0;s<t.routes.length;s++){var l=t.routes[s],d=l.vehicle_id,h=r[d];l.profile=h;for(var v=0;v<l.activities.length;v++){var c=l.activities[v];if(c.address=p[c.location_id],c.id){var u=_[c.id];u?c.break=_[c.id]:a[c.id]?c.service=a[c.id]:n[c.id]&&(c.shipment=n[c.id])}else{var y=f[d];c.vehicle=y,c.vehicle_type=o[y.type_id]}}}for(var g=new Array,m=0;m<t.unassigned.services.length;m++){var O=t.unassigned.services[m];g.push(a[O])}t.unassigned_services=g;for(var k=new Array,m=0;m<t.unassigned.shipments.length;m++){var G=t.unassigned.shipments[m];k.push(n[G])}t.unassigned_shipments=k}i(e)};this.doRawRequest(e,k,t)},module.exports=GraphHopperOptimization;

},{"./GHUtil":2}],8:[function(_dereq_,module,exports){
var GHUtil=_dereq_("./GHUtil"),ghUtil=new GHUtil;GraphHopperRouting=function(t){this.points=[],this.host="https://graphhopper.com/api/1",this.vehicle="car",this.debug=!1,this.data_type="json",this.locale="en",this.points_encoded=!0,this.instructions=!0,this.elevation=!1,this.optimize="false",this.basePath="/route",this.graphhopper_maps_host="https://graphhopper.com/maps/?",this.turn_sign_map={"-6":"leave roundabout","-3":"turn sharp left","-2":"turn left","-1":"turn slight left",0:"continue",1:"turn slight right",2:"turn right",3:"turn sharp right",4:"finish",5:"reached via point",6:"enter roundabout"},ghUtil.copyProperties(t,this)},GraphHopperRouting.prototype.clearPoints=function(){this.points.length=0},GraphHopperRouting.prototype.addPoint=function(t){this.points.push(t)},GraphHopperRouting.prototype.getParametersAsQueryString=function(t){var e="locale="+t.locale;for(var o in t.points){var i=t.points[o];e+="&point="+encodeURIComponent(i.toString())}return t.debug&&(e+="&debug=true"),e+="&type="+t.data_type,t.instructions&&(e+="&instructions="+t.instructions),t.points_encoded&&(e+="&points_encoded="+t.points_encoded),t.elevation&&(e+="&elevation="+t.elevation),t.optimize&&(e+="&optimize="+t.optimize),t.vehicle&&(e+="&vehicle="+t.vehicle),e},GraphHopperRouting.prototype.doRequest=function(t,e){var o=this,i=ghUtil.clone(o);e&&(i=ghUtil.copyProperties(e,i));var n=i.host+i.basePath+"?"+o.getParametersAsQueryString(i)+"&key="+i.key;$.ajax({timeout:5e3,url:n,type:"GET",dataType:i.data_type}).done(function(e){if(e.paths)for(var i=0;i<e.paths.length;i++){var n=e.paths[i];if(n.points_encoded){var r=ghUtil.decodePath(n.points,o.elevation);n.points={type:"LineString",coordinates:r};var p=ghUtil.decodePath(n.snapped_waypoints,o.elevation);n.snapped_waypoints={type:"LineString",coordinates:p}}}t(e)}).fail(function(e){t(e.responseJSON&&e.responseJSON.message?e.responseJSON:{message:"Unknown error",details:"Error for "+n})})},GraphHopperRouting.prototype.getGraphHopperMapsLink=function(){return this.graphhopper_maps_host+this.getParametersAsQueryString(this)},GraphHopperRouting.prototype.getTurnText=function(t){return this.turn_sign_map[t]},module.exports=GraphHopperRouting;

},{"./GHUtil":2}],9:[function(_dereq_,module,exports){
var GHUtil=_dereq_("./GHUtil.js"),GHInput=_dereq_("./GHInput.js"),GraphHopperGeocoding=_dereq_("./GraphHopperGeocoding.js"),GraphHopperIsochrone=_dereq_("./GraphHopperIsochrone.js"),GraphHopperMapMatching=_dereq_("./GraphHopperMapMatching.js"),GraphHopperMatrix=_dereq_("./GraphHopperMatrix.js"),GraphHopperOptimization=_dereq_("./GraphHopperOptimization.js"),GraphHopperRouting=_dereq_("./GraphHopperRouting.js"),GraphHopper={Util:GHUtil,Input:GHInput,Geocoding:GraphHopperGeocoding,Isochrone:GraphHopperIsochrone,MapMatching:GraphHopperMapMatching,Optimization:GraphHopperOptimization,Routing:GraphHopperRouting,Matrix:GraphHopperMatrix};"object"==typeof module&&"object"==typeof module.exports?module.exports.GraphHopper=GraphHopper:"function"==typeof define&&define.amd&&define(GraphHopper),"undefined"!=typeof window&&(window.GraphHopper=GraphHopper);
},{"./GHInput.js":1,"./GHUtil.js":2,"./GraphHopperGeocoding.js":3,"./GraphHopperIsochrone.js":4,"./GraphHopperMapMatching.js":5,"./GraphHopperMatrix.js":6,"./GraphHopperOptimization.js":7,"./GraphHopperRouting.js":8}]},{},[9]);
